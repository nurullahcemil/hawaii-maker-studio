{% comment %}
  Event Product Template - Static Version
  Simple template that pulls all content from metaobjects
{% endcomment %}

{%- assign event_handle = product.metafields.custom.event_handle -%}
{%- if event_handle != blank -%}
  {%- assign event = shop.metaobjects.event[event_handle] -%}
{%- endif -%}

<div class="event-product-page">
  
  <!-- Product Header -->
  <div class="product-header">
    <h1>{{ product.title }}</h1>
    <div class="product-price">{{ product.price | money }}</div>
  </div>

  <!-- Event Content from Metaobject -->
  {%- if event -%}
    
    <!-- Event Description -->
    {%- if event.description != blank -%}
      <div class="event-section">
        <h2>{{ event.title | default: 'About This Event' }}</h2>
        <div class="event-description">{{ event.description }}</div>
      </div>
    {%- endif -%}

    <!-- Event Details Grid -->
    <div class="event-details-grid">
      
      {%- if event.skill_level != blank -%}
        <div class="event-detail-card">
          <div class="detail-icon">üëÅÔ∏è</div>
          <div class="detail-content">
            <h3>Skill Level</h3>
            <p>{{ event.skill_level }}</p>
          </div>
        </div>
      {%- endif -%}
      
      {%- if event.audience != blank -%}
        <div class="event-detail-card">
          <div class="detail-icon">üë§</div>
          <div class="detail-content">
            <h3>Who is it for?</h3>
            <p>{{ event.audience }}</p>
          </div>
        </div>
      {%- endif -%}
      
      {%- if event.duration != blank -%}
        <div class="event-detail-card">
          <div class="detail-icon">‚è±Ô∏è</div>
          <div class="detail-content">
            <h3>Duration</h3>
            <p>{{ event.duration }}</p>
          </div>
        </div>
      {%- endif -%}
      
      {%- if event.location != blank -%}
        <div class="event-detail-card">
          <div class="detail-icon">üìç</div>
          <div class="detail-content">
            <h3>Location</h3>
            <p>{{ event.location }}</p>
          </div>
        </div>
      {%- endif -%}
      
    </div>

    <!-- What to Expect -->
    {%- if event.what_to_expect != blank -%}
      <div class="event-section">
        <h2>What to Expect</h2>
        <div class="event-content">{{ event.what_to_expect }}</div>
      </div>
    {%- endif -%}

    <!-- Host Information -->
    {%- if event.host_name != blank or event.host_bio != blank -%}
      <div class="event-section host-section">
        <h2>{{ event.host_name | default: 'Host' }}</h2>
        {%- if event.host_bio != blank -%}
          <div class="host-bio">{{ event.host_bio }}</div>
        {%- endif -%}
      </div>
    {%- endif -%}

  {%- else -%}
    <div class="event-section">
      <p>No event information available.</p>
    </div>
  {%- endif -%}

  <!-- Product Purchase Section -->
  <div class="product-purchase-section">
    <form action="/cart/add" method="post" enctype="multipart/form-data">
      <select name="id" class="variant-selector">
        {% for variant in product.variants %}
          <option value="{{ variant.id }}" {% if variant == product.selected_or_first_available_variant %}selected{% endif %}>
            {{ variant.title }} - {{ variant.price | money }}
          </option>
        {% endfor %}
      </select>
      
      <div class="quantity-selector">
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" value="1" min="1">
      </div>
      
      <button type="submit" class="add-to-cart-btn">
        Add to Cart - {{ product.price | money }}
      </button>
    </form>
  </div>

</div>

<style>
.event-product-page {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.product-header {
  text-align: center;
  margin-bottom: 40px;
}

.product-header h1 {
  font-size: 2.5rem;
  margin-bottom: 10px;
}

.product-price {
  font-size: 1.5rem;
  font-weight: bold;
  color: #007bff;
}

.event-section {
  margin: 40px 0;
  padding: 30px;
  background: #f8f9fa;
  border-radius: 10px;
}

.event-section h2 {
  font-size: 1.8rem;
  margin-bottom: 20px;
  color: #333;
}

.event-description, .event-content, .host-bio {
  font-size: 1.1rem;
  line-height: 1.6;
  color: #666;
}

.event-details-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 40px 0;
}

.event-detail-card {
  display: flex;
  align-items: center;
  padding: 20px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.detail-icon {
  font-size: 2rem;
  margin-right: 15px;
}

.detail-content h3 {
  margin: 0 0 5px 0;
  font-size: 1.1rem;
  color: #333;
}

.detail-content p {
  margin: 0;
  color: #666;
}

.host-section {
  background: #e3f2fd;
}

.product-purchase-section {
  margin: 40px 0;
  padding: 30px;
  background: #f0f8ff;
  border-radius: 10px;
  text-align: center;
}

.variant-selector, .quantity-selector input {
  width: 100%;
  max-width: 300px;
  padding: 10px;
  margin: 10px 0;
  border: 1px solid #ddd;
  border-radius: 5px;
}

.add-to-cart-btn {
  background: #007bff;
  color: white;
  padding: 15px 30px;
  border: none;
  border-radius: 5px;
  font-size: 1.1rem;
  cursor: pointer;
  margin-top: 20px;
}

.add-to-cart-btn:hover {
  background: #0056b3;
}

@media (max-width: 768px) {
  .event-product-page {
    padding: 10px;
  }
  
  .product-header h1 {
    font-size: 2rem;
  }
  
  .event-details-grid {
    grid-template-columns: 1fr;
  }
}
</style>
